# Tamagui Configuration Guide

## Overview

This document provides comprehensive guidance on Tamagui configuration decisions, version considerations, and theming strategies for this React Native Web UI library.

## Current Configuration

### Tamagui Version: v1.132.23 (Stable v3 Config)

Our library currently uses Tamagui v1.132.23 with the stable v3 configuration:

```typescript
// tamagui.config.ts
import { config } from '@tamagui/config/v3'
import { createTamagui } from 'tamagui'

const tamaguiConfig = createTamagui(config)
export default tamaguiConfig
```

### Why v3 Configuration?

- **Production Stability**: v3 config is battle-tested and reliable
- **Cross-Platform Compatibility**: Works consistently across React Native and Web
- **Community Support**: Extensive documentation and community solutions
- **Minimal Breaking Changes**: Stable API reduces maintenance burden

## Tamagui v4 Analysis

### The `createThemes` Feature

Tamagui v4 introduces the powerful `createThemes` functionality that offers:

- **Streamlined Theme Generation**: Opinionated way to create comprehensive theme suites
- **Simplified Configuration**: Reduces boilerplate code for complex theming scenarios
- **Enhanced Theme Management**: Easier maintenance of consistent themes across components
- **Advanced Theming Capabilities**: More sophisticated theme inheritance and customization

### Current v4 Stability Concerns (As of 2024)

Despite the appealing features, v4 has documented stability issues:

#### Critical Bugs

- **Select Component Issues**: Non-functional on Android and iOS platforms
- **Theme Reset Crashes**: `<Theme reset>` component causes application crashes
- **Performance Degradation**: Reports of performance issues on mobile platforms

#### GitHub Issues References

- [Select component not working on mobile](https://github.com/tamagui/tamagui/issues/3210)
- [Theme reset crashes](https://github.com/tamagui/tamagui/issues/3238)
- [Performance concerns](https://github.com/tamagui/tamagui/issues/1807)

## Recommendation: Stay with v3

### Decision Rationale

1. **Library Reliability Priority**: As a UI component library, stability is paramount for end users
2. **Current Setup Effectiveness**: v3 configuration meets all current theming needs
3. **Risk Assessment**: v4 benefits don't outweigh potential stability risks
4. **Alternative Solutions**: v3's existing theme system provides sufficient flexibility

### When to Reconsider v4 Upgrade

Monitor these indicators for future upgrade consideration:

- [ ] Major stability issues resolved (track GitHub issues)
- [ ] Consistent positive community feedback
- [ ] Official stability announcement from Tamagui team
- [ ] Specific advanced theming requirements that v3 cannot handle

## Current Theming Strategy

### Theme Structure

Our v3 configuration provides:

- **Built-in Themes**: Light and dark mode support
- **Token System**: Consistent spacing, colors, and typography
- **Component Variants**: Flexible component styling options
- **Responsive Design**: Breakpoint-based styling

### Custom Design Tokens

Our configuration now includes comprehensive design tokens that your design team can customize:

#### Token Categories

- **Size & Space Tokens**: Consistent spacing scale from `$0.25` (2px) to `$96` (768px)
- **Color Tokens**: Brand colors, semantic colors (success, warning, error), and neutral grays
- **Radius Tokens**: Border radius scale from `$0` to `$full` (9999px)
- **Z-Index Tokens**: Layering system from `$0` to `$50`

#### Available Token Scales

```typescript
// Size and space tokens (px values)
$0.25 = 2px    $1 = 8px     $4 = 32px    $12 = 96px
$0.5 = 4px     $2 = 16px    $6 = 48px    $16 = 128px
$0.75 = 6px    $3 = 24px    $8 = 64px    $20 = 160px

// Color tokens
$brand500      // Primary brand color
$success500    // Success state color
$warning500    // Warning state color
$error500      // Error state color
$neutral500    // Neutral gray

// Radius tokens
$4 = 8px       $8 = 16px    $12 = 24px   $full = 9999px
```

### Extending Themes

Our extended configuration provides semantic theme tokens:

```typescript
// Theme-aware styling
<Button 
  backgroundColor="$brand" 
  borderColor="$borderColorFocus"
  padding="$4"
  borderRadius="$6"
>
  Themed Button
</Button>
```

### Component Theming

Components support theme-aware styling:

```tsx
// Theme-aware component usage
<Button theme="brand" variant="primary">
  Themed Button
</Button>
```

## Design Token System

### Token Reference

Our comprehensive token system provides consistent values across all components:

#### Spacing & Sizing
```typescript
// Fractional values for fine-tuned spacing
$0.25, $0.5, $0.75  // 2px, 4px, 6px

// Standard spacing scale
$1, $2, $3, $4, $5, $6, $8, $10, $12, $16, $20  // 8px - 160px

// Large spacing for layouts
$24, $32, $40, $48, $64, $80, $96  // 192px - 768px

// Negative spacing for margin adjustments
$-1, $-2, $-3, $-4, $-6, $-8  // -8px to -64px
```

#### Color System
```typescript
// Brand colors (50-950 scale)
$brand50   // Lightest tint
$brand500  // Primary brand color
$brand950  // Darkest shade

// Semantic colors
$success500, $warning500, $error500  // State colors
$neutral50 to $neutral950            // Gray scale

// Theme-aware colors (automatically switch light/dark)
$background, $color, $borderColor
$brand, $success, $warning, $error
```

#### Border Radius
```typescript
$0     // No radius
$1-$4  // Small radius (2px-8px)
$6-$12 // Medium radius (12px-24px)
$16-$24// Large radius (32px-48px)
$full  // Fully rounded (9999px)
```

### Design Team Customization

To customize the design system, modify the tokens in `tamagui.config.ts`:

```typescript
// Example: Updating brand colors
const tokens = createTokens({
  color: {
    // Update these values to match your brand
    brand500: '#your-primary-color',
    brand600: '#your-primary-hover',
    
    // Or update semantic colors
    success500: '#your-success-color',
    warning500: '#your-warning-color',
    error500: '#your-error-color',
  },
  
  // Update spacing scale if needed
  space: {
    // Add custom spacing values
    xs: 4,    // $xs = 4px
    sm: 8,    // $sm = 8px
    md: 16,   // $md = 16px
    lg: 24,   // $lg = 24px
    xl: 32,   // $xl = 32px
  },
})
```

## Development Guidelines

### Using Design Tokens

Always use design tokens instead of hardcoded values:

```typescript
// ✅ Good - Using design tokens
<Button
  padding="$4"
  margin="$2"
  backgroundColor="$brand"
  borderRadius="$6"
  borderColor="$borderColorFocus"
/>

// ❌ Bad - Hardcoded values
<Button
  padding={32}
  margin={16}
  backgroundColor="#0ea5e9"
  borderRadius={12}
  borderColor="#0284c7"
/>
```

### Theme Testing

When developing themed components:

1. **Test Both Themes**: Always verify light and dark mode compatibility
2. **Cross-Platform Validation**: Test on both web and native platforms
3. **Accessibility Compliance**: Ensure sufficient color contrast ratios
4. **Performance Monitoring**: Watch for theme switching performance

### Best Practices

- **Consistent Token Usage**: Use design tokens instead of hardcoded values
- **Semantic Colors**: Use theme-aware colors (`$brand`, `$success`) over specific shades
- **Spacing Scale**: Stick to the defined spacing scale for consistency
- **Theme Inheritance**: Leverage existing theme structures when possible
- **Documentation**: Document any custom theme extensions
- **Testing**: Include theme variations in component stories and tests

## Monitoring v4 Progress

### Key Resources to Monitor

- [Tamagui GitHub Issues](https://github.com/tamagui/tamagui/issues)
- [Tamagui Discord Community](https://discord.gg/tamagui)
- [Official Documentation Updates](https://tamagui.dev/docs)
- [Release Notes](https://github.com/tamagui/tamagui/releases)

### Upgrade Checklist (Future)

When v4 becomes stable:

- [ ] Review breaking changes documentation
- [ ] Test migration in development environment
- [ ] Evaluate `createThemes` benefits for current use cases
- [ ] Update component stories and tests
- [ ] Verify cross-platform compatibility
- [ ] Performance regression testing
- [ ] Update this documentation

## Conclusion

While Tamagui v4's `createThemes` functionality is impressive, our current v3 configuration provides the stability and reliability needed for a production UI library. We'll continue monitoring v4's progress and will upgrade when the stability concerns are resolved.

For questions or suggestions regarding this configuration strategy, please refer to the project maintainers or open an issue for discussion.

---

*Last Updated: December 2024*  
*Tamagui Version Analyzed: v4 (latest available)*  
*Current Production Version: v1.132.23 (v3 config)*
