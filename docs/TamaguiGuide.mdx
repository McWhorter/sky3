# Tamagui Configuration Guide

## Overview

This document provides comprehensive guidance on Tamagui configuration decisions, version considerations, and theming strategies for this React Native Web UI library.

## Current Configuration

### Tamagui Version: v1.132.23 (Stable v3 Config)

Our library currently uses Tamagui v1.132.23 with the stable v3 configuration:

```typescript
// tamagui.config.ts
import { config } from '@tamagui/config/v3'
import { createTamagui } from 'tamagui'

const tamaguiConfig = createTamagui(config)
export default tamaguiConfig
```

### Why v3 Configuration?

- **Production Stability**: v3 config is battle-tested and reliable
- **Cross-Platform Compatibility**: Works consistently across React Native and Web
- **Community Support**: Extensive documentation and community solutions
- **Minimal Breaking Changes**: Stable API reduces maintenance burden

## Tamagui v4 Analysis

### The `createThemes` Feature

Tamagui v4 introduces the powerful `createThemes` functionality that offers:

- **Streamlined Theme Generation**: Opinionated way to create comprehensive theme suites
- **Simplified Configuration**: Reduces boilerplate code for complex theming scenarios
- **Enhanced Theme Management**: Easier maintenance of consistent themes across components
- **Advanced Theming Capabilities**: More sophisticated theme inheritance and customization

### Current v4 Stability Concerns (As of 2024)

Despite the appealing features, v4 has documented stability issues:

#### Critical Bugs

- **Select Component Issues**: Non-functional on Android and iOS platforms
- **Theme Reset Crashes**: `<Theme reset>` component causes application crashes
- **Performance Degradation**: Reports of performance issues on mobile platforms

#### GitHub Issues References

- [Select component not working on mobile](https://github.com/tamagui/tamagui/issues/3210)
- [Theme reset crashes](https://github.com/tamagui/tamagui/issues/3238)
- [Performance concerns](https://github.com/tamagui/tamagui/issues/1807)

## Recommendation: Stay with v3

### Decision Rationale

1. **Library Reliability Priority**: As a UI component library, stability is paramount for end users
2. **Current Setup Effectiveness**: v3 configuration meets all current theming needs
3. **Risk Assessment**: v4 benefits don't outweigh potential stability risks
4. **Alternative Solutions**: v3's existing theme system provides sufficient flexibility

### When to Reconsider v4 Upgrade

Monitor these indicators for future upgrade consideration:

- [ ] Major stability issues resolved (track GitHub issues)
- [ ] Consistent positive community feedback
- [ ] Official stability announcement from Tamagui team
- [ ] Specific advanced theming requirements that v3 cannot handle

## Current Theming Strategy

### Theme Structure

Our v3 configuration provides:

- **Built-in Themes**: Light and dark mode support
- **Token System**: Consistent spacing, colors, and typography
- **Component Variants**: Flexible component styling options
- **Responsive Design**: Breakpoint-based styling

### Extending Themes

To extend or customize themes with the current v3 setup:

```typescript
// Example: Custom theme extension
import { createTamagui } from 'tamagui'
import { config } from '@tamagui/config/v3'

const customConfig = createTamagui({
  ...config,
  themes: {
    ...config.themes,
    // Add custom themes here
    brand: {
      ...config.themes.light,
      primary: '#your-brand-color',
    },
  },
})
```

### Component Theming

Components support theme-aware styling:

```tsx
// Theme-aware component usage
<Button theme="brand" variant="primary">
  Themed Button
</Button>
```

## Development Guidelines

### Theme Testing

When developing themed components:

1. **Test Both Themes**: Always verify light and dark mode compatibility
2. **Cross-Platform Validation**: Test on both web and native platforms
3. **Accessibility Compliance**: Ensure sufficient color contrast ratios
4. **Performance Monitoring**: Watch for theme switching performance

### Best Practices

- **Consistent Token Usage**: Use design tokens instead of hardcoded values
- **Theme Inheritance**: Leverage existing theme structures when possible
- **Documentation**: Document any custom theme extensions
- **Testing**: Include theme variations in component stories and tests

## Monitoring v4 Progress

### Key Resources to Monitor

- [Tamagui GitHub Issues](https://github.com/tamagui/tamagui/issues)
- [Tamagui Discord Community](https://discord.gg/tamagui)
- [Official Documentation Updates](https://tamagui.dev/docs)
- [Release Notes](https://github.com/tamagui/tamagui/releases)

### Upgrade Checklist (Future)

When v4 becomes stable:

- [ ] Review breaking changes documentation
- [ ] Test migration in development environment
- [ ] Evaluate `createThemes` benefits for current use cases
- [ ] Update component stories and tests
- [ ] Verify cross-platform compatibility
- [ ] Performance regression testing
- [ ] Update this documentation

## Conclusion

While Tamagui v4's `createThemes` functionality is impressive, our current v3 configuration provides the stability and reliability needed for a production UI library. We'll continue monitoring v4's progress and will upgrade when the stability concerns are resolved.

For questions or suggestions regarding this configuration strategy, please refer to the project maintainers or open an issue for discussion.

---

*Last Updated: December 2024*  
*Tamagui Version Analyzed: v4 (latest available)*  
*Current Production Version: v1.132.23 (v3 config)*
